<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bally's DNA Challenge - Always Ready</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .header { text-align: center; margin-bottom: 30px; }
        .progress-bar { width: 100%; height: 20px; background: #f0f0f0; border-radius: 10px; margin: 20px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #4CAF50, #45a049); transition: width 0.5s ease; }
        .game-section { display: none; }
        .game-section.active { display: block; animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Sudoku Styles */
        .sudoku-container { display: grid; grid-template-columns: 1fr auto; gap: 30px; align-items: start; }
        .sudoku-grid { 
            display: grid; 
            grid-template-columns: repeat(6, 60px); 
            grid-template-rows: repeat(6, 60px); 
            gap: 1px; 
            background: #ddd; 
            padding: 2px; 
            border-radius: 8px; 
            margin: 0 auto; 
        }
        .sudoku-cell { 
            background: white; 
            font-size: 24px; 
            text-align: center; 
            cursor: pointer; 
            transition: all 0.2s; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border: 1px solid #ccc;
            min-height: 58px;
            min-width: 58px;
        }
        .sudoku-cell:hover { background: #e3f2fd; }
        .sudoku-cell.selected { background: #2196f3 !important; color: white; }
        .sudoku-cell.fixed { background: #f5f5f5; cursor: not-allowed; font-weight: bold; }
        .symbol-palette { display: grid; grid-template-columns: repeat(2, 80px); gap: 10px; }
        .symbol-btn { width: 80px; height: 80px; border: 2px solid #ddd; background: white; font-size: 32px; cursor: pointer; border-radius: 8px; transition: all 0.2s; }
        .symbol-btn:hover { border-color: #2196f3; background: #e3f2fd; }
        .symbol-btn.selected { border-color: #2196f3; background: #2196f3; color: white; }
        
        /* Cipher Styles */
        .cipher-container { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: start; }
        .cipher-grid-wrapper { text-align: center; }
        .grid-labels { display: grid; grid-template-columns: 25px repeat(8, 40px); gap: 1px; margin-bottom: 5px; text-align: center; font-weight: bold; }
        .cipher-grid { display: grid; grid-template-columns: 25px repeat(8, 40px); grid-template-rows: repeat(6, 40px); gap: 1px; background: #ddd; padding: 1px; border-radius: 8px; }
        .row-label { background: #f0f0f0; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; }
        .cipher-cell { background: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; transition: all 0.2s; font-size: 14px; border: none; }
        .cipher-cell:hover { background: #e3f2fd; }
        .cipher-cell.highlighted { background: #ffeb3b !important; color: #333; }
        .answer-input { display: flex; gap: 10px; justify-content: center; margin: 20px 0; }
        .letter-input { width: 50px; height: 50px; text-align: center; font-size: 24px; font-weight: bold; border: 2px solid #ddd; border-radius: 8px; text-transform: uppercase; }
        .letter-input:focus { border-color: #2196f3; outline: none; }
        .letter-input.correct { background: #d4edda; border-color: #28a745; }
        
        /* General Styles */
        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.2s; margin: 5px; }
        .btn-primary { background: #2196f3; color: white; }
        .btn-primary:hover { background: #1976d2; }
        .btn-success { background: #4CAF50; color: white; }
        .btn-success:hover { background: #45a049; }
        .btn-secondary { background: #757575; color: white; }
        .btn-secondary:hover { background: #616161; }
        .controls { text-align: center; margin: 20px 0; }
        .key-section { background: #e8f5e8; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; }
        .final-section { background: #fff3e0; padding: 30px; border-radius: 8px; text-align: center; margin: 20px 0; }
        .final-input { width: 300px; height: 50px; text-align: center; font-size: 20px; font-weight: bold; border: 3px solid #ff9800; border-radius: 8px; margin: 20px; text-transform: uppercase; }
        .success-message { background: #d4edda; color: #155724; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .error-message { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .forms-link { background: #4CAF50; color: white; padding: 20px; border-radius: 10px; text-align: center; margin: 20px 0; }
        .forms-link a { color: white; text-decoration: none; font-weight: bold; font-size: 18px; }
        .forms-link a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Bally's DNA Challenge</h1>
            <div style="font-size: 1.2em; margin: 10px 0; color: #666;">DNA Month: "Always Ready"</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <p id="progressText">Part 1 of 2: Complete the Symbol Sudoku</p>
        </div>

        <!-- Game 1: Symbol Sudoku -->
        <div class="game-section active" id="game1">
            <h2 style="text-align: center;">üß© Symbol Sudoku</h2>
            <p style="text-align: center;">Fill each row, column, and 2√ó3 box with each symbol exactly once!</p>
            
            <div class="sudoku-container">
                <div>
                    <div class="sudoku-grid" id="sudokuGrid"></div>
                    <div class="controls">
                        <button class="btn btn-secondary" onclick="checkSudokuSolution()">Check Solution</button>
                        <button class="btn btn-secondary" onclick="resetSudoku()">Reset</button>
                    </div>
                </div>
                
                <div>
                    <h3 style="text-align: center; margin-bottom: 15px;">Symbol Palette</h3>
                    <div class="symbol-palette" id="symbolPalette"></div>
                    <button class="btn btn-secondary" onclick="clearCell()" style="width: 100%; margin-top: 15px;">Clear Cell</button>
                </div>
            </div>
            
            <div class="key-section">
                <h3>üîë Part 1 Answer Progress:</h3>
                <div id="keyProgress" style="font-size: 1.5em; font-weight: bold; margin: 15px 0;">_ _ _ _ _ _</div>
                <p>Complete the puzzle to reveal the first half of your final answer!</p>
            </div>
        </div>

        <!-- Game 2: Cipher Grid -->
        <div class="game-section" id="game2">
            <h2 style="text-align: center;">üîç Cipher Grid Challenge</h2>
            <p style="text-align: center;">Use the coordinates to decode the hidden message!</p>
            
            <div class="cipher-container">
                <div class="cipher-grid-wrapper">
                    <h3 style="margin-bottom: 20px;">üîç Cipher Grid</h3>
                    <div class="grid-labels">
                        <div></div>
                        <div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div>
                    </div>
                    <div class="cipher-grid" id="cipherGrid"></div>
                </div>
                
                <div>
                    <h3 style="text-align: center; margin-bottom: 20px;">üéØ Coordinate Decoder</h3>
                    
                    <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 10px 0; text-align: center; font-weight: bold;">
                        Target Coordinates:<br>
                        (1,2) (6,5) (1,3) (3,4) (6,6) (1,5)
                    </div>
                    
                    <div>
                        <h4>Enter decoded letters:</h4>
                        <div class="answer-input">
                            <input type="text" class="letter-input" maxlength="1" id="letter0" oninput="handleLetterInput(0)">
                            <input type="text" class="letter-input" maxlength="1" id="letter1" oninput="handleLetterInput(1)">
                            <input type="text" class="letter-input" maxlength="1" id="letter2" oninput="handleLetterInput(2)">
                            <input type="text" class="letter-input" maxlength="1" id="letter3" oninput="handleLetterInput(3)">
                            <input type="text" class="letter-input" maxlength="1" id="letter4" oninput="handleLetterInput(4)">
                            <input type="text" class="letter-input" maxlength="1" id="letter5" oninput="handleLetterInput(5)">
                        </div>
                    </div>
                    
                    <div class="key-section">
                        <h3>üîë Part 2 Answer:</h3>
                        <div id="cipherAnswer" style="font-size: 1.5em; font-weight: bold;">_ _ _ _ _ _</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Final Answer Section -->
        <div class="game-section" id="finalSection">
            <div class="final-section">
                <h2>üéâ Congratulations!</h2>
                <p>You've completed both puzzles! Now combine your answers:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0;">
                    <div>
                        <h3>Part 1 Answer:</h3>
                        <div id="finalPart1" style="font-size: 2em; font-weight: bold; color: #2196f3;"></div>
                    </div>
                    <div>
                        <h3>Part 2 Answer:</h3>
                        <div id="finalPart2" style="font-size: 2em; font-weight: bold; color: #4CAF50;"></div>
                    </div>
                </div>
                
                <h3>Enter your final combined answer:</h3>
                <input type="text" class="final-input" id="finalAnswer" placeholder="PART1PART2" oninput="checkFinalAnswer()">
                
                <div class="forms-link" id="formsLink" style="display: none;">
                    <h3>üèÜ Submit your answer to win!</h3>
                    <a href="https://forms.office.com/e/dkLGVbrMr8" target="_blank">
                        Click here to submit your final answer
                    </a>
                    <p style="margin-top: 10px; font-size: 14px;">
                        Your final answer: <span id="submissionAnswer" style="font-weight: bold;"></span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>

        // Game state variables
        let currentGame = 1;
        let selectedCell = null;
        let selectedSymbol = null;
        let sudokuAnswer = "";
        let cipherAnswer = "";
        let currentGrid = [];

        // Sudoku solution (converted from your number grid to symbols)
        const sudokuSolution = [
            ['‚ô¶Ô∏è', 'üîÆ', 'üåü', '‚ö°', 'üéØ', 'üíú'],
            ['‚ö°', 'üíú', 'üéØ', 'üîÆ', '‚ô¶Ô∏è', 'üåü'],
            ['üåü', '‚ô¶Ô∏è', 'üîÆ', 'üéØ', 'üíú', '‚ö°'],
            ['üíú', 'üéØ', '‚ö°', 'üåü', 'üîÆ', '‚ô¶Ô∏è'],
            ['üéØ', 'üåü', '‚ô¶Ô∏è', 'üíú', '‚ö°', 'üîÆ'],
            ['üîÆ', '‚ö°', 'üíú', '‚ô¶Ô∏è', 'üåü', 'üéØ']
        ];

        // Starting puzzle (some cells removed)
        const sudokuPuzzle = [
            ['‚ô¶Ô∏è', '', 'üåü', '‚ö°', '', 'üíú'],
            ['', 'üíú', '', 'üîÆ', '‚ô¶Ô∏è', ''],
            ['üåü', '‚ô¶Ô∏è', '', '', 'üíú', '‚ö°'],
            ['üíú', '', '‚ö°', 'üåü', '', '‚ô¶Ô∏è'],
            ['', 'üåü', '‚ô¶Ô∏è', '', '‚ö°', 'üîÆ'],
            ['üîÆ', '', '', '‚ô¶Ô∏è', 'üåü', '']
        ];

        const symbols = ['‚ô¶Ô∏è', 'üîÆ', 'üåü', 'üéØ', '‚ö°', 'üíú'];

        // Cipher grid data
        const cipherData = [
            ['B', 'E', 'A', 'D', 'Y', 'F', 'G', 'H'],
            ['I', 'V', 'K', 'L', 'M', 'N', 'O', 'P'],
            ['Q', 'R', 'S', 'T', 'U', 'E', 'W', 'X'],
            ['C', 'Z', 'A', 'B', 'C', 'D', 'E', 'F'],
            ['G', 'H', 'I', 'J', 'K', 'L', 'M', 'N'],
            ['O', 'P', 'Q', 'R', 'E', 'A', 'D', 'Y']
        ];

        // Coordinates: (1,2)=E, (6,5)=E, (1,3)=A, (3,4)=T, (6,6)=A, (1,5)=Y = EEATAY
        const coordinates = [
            {coord: '(1,2)', row: 0, col: 1, answer: 'E'},
            {coord: '(6,5)', row: 5, col: 4, answer: 'E'},
            {coord: '(1,3)', row: 0, col: 2, answer: 'A'},
            {coord: '(3,4)', row: 2, col: 3, answer: 'T'},
            {coord: '(6,6)', row: 5, col: 5, answer: 'A'},
            {coord: '(1,5)', row: 0, col: 4, answer: 'Y'}
        ];

        // Initialize the game
        function initGame() {
            currentGrid = JSON.parse(JSON.stringify(sudokuPuzzle));
            createSudokuGrid();
            createSymbolPalette();
            createCipherGrid();
            updateProgress();
        }

        // Create Sudoku grid
        function createSudokuGrid() {
            const grid = document.getElementById('sudokuGrid');
            grid.innerHTML = '';
            
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 6; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'sudoku-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    if (sudokuPuzzle[row][col]) {
                        cell.textContent = sudokuPuzzle[row][col];
                        cell.classList.add('fixed');
                    } else {
                        cell.textContent = currentGrid[row][col] || '';
                        cell.addEventListener('click', () => selectSudokuCell(row, col));
                    }
                    
                    grid.appendChild(cell);
                }
            }
        }

        // Create symbol palette
        function createSymbolPalette() {
            const palette = document.getElementById('symbolPalette');
            palette.innerHTML = '';
            
            symbols.forEach(symbol => {
                const btn = document.createElement('button');
                btn.className = 'symbol-btn';
                btn.textContent = symbol;
                btn.onclick = () => selectSymbol(symbol);
                palette.appendChild(btn);
            });
        }

        // Create cipher grid
        function createCipherGrid() {
            const grid = document.getElementById('cipherGrid');
            grid.innerHTML = '';
            
            for (let row = 0; row < 6; row++) {
                // Row label
                const rowLabel = document.createElement('div');
                rowLabel.className = 'row-label';
                rowLabel.textContent = row + 1;
                grid.appendChild(rowLabel);
                
                // Row cells
                for (let col = 0; col < 8; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cipher-cell';
                    cell.textContent = cipherData[row][col];
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    cell.addEventListener('click', () => highlightCipherCell(row, col));
                    grid.appendChild(cell);
                }
            }
        }

        // Sudoku Functions
        function selectSudokuCell(row, col) {
            document.querySelectorAll('.sudoku-cell.selected').forEach(cell => {
                cell.classList.remove('selected');
            });
            
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if (!cell.classList.contains('fixed')) {
                cell.classList.add('selected');
                selectedCell = {row, col};
            }
        }

        function selectSymbol(symbol) {
            document.querySelectorAll('.symbol-btn.selected').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            event.target.classList.add('selected');
            selectedSymbol = symbol;
            
            if (selectedCell) {
                placeSymbol();
            }
        }

        function placeSymbol() {
            if (selectedCell && selectedSymbol) {
                const {row, col} = selectedCell;
                currentGrid[row][col] = selectedSymbol;
                
                const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                cell.textContent = selectedSymbol;
                
                updateSudokuProgress();
                
                // Auto-check for completion after short delay
                setTimeout(autoCheckSudoku, 300);
            }
        }

        function autoCheckSudoku() {
            let isComplete = true;
            let isCorrect = true;
            
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 6; col++) {
                    if (!currentGrid[row][col]) {
                        isComplete = false;
                        break;
                    } else if (currentGrid[row][col] !== sudokuSolution[row][col]) {
                        isCorrect = false;
                    }
                }
                if (!isComplete) break;
            }
            
            if (isComplete && isCorrect) {
                sudokuAnswer = '123456';
                showMessage('üéâ Sudoku completed! Moving to Part 2...', 'success');
                setTimeout(() => {
                    switchToGame2();
                }, 2000);
            }
        }

        function clearCell() {
            if (selectedCell) {
                const {row, col} = selectedCell;
                currentGrid[row][col] = '';
                
                const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                cell.textContent = '';
                
                updateSudokuProgress();
            }
        }

        function updateSudokuProgress() {
            const key = extractSudokuKey();
            document.getElementById('keyProgress').textContent = key || '_ _ _ _ _ _';
        }

        function extractSudokuKey() {
            let key = '';
            for (let i = 0; i < 6; i++) {
                if (currentGrid[i][i]) {
                    const symbolToNumber = {'‚ô¶Ô∏è': '1', 'üîÆ': '2', 'üåü': '3', 'üéØ': '4', '‚ö°': '5', 'üíú': '6'};
                    key += symbolToNumber[currentGrid[i][i]] || '_';
                } else {
                    key += '_';
                }
            }
            return key.split('').join(' ');
        }

        function checkSudokuSolution() {
            let isComplete = true;
            let isCorrect = true;
            
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 6; col++) {
                    if (!currentGrid[row][col]) {
                        isComplete = false;
                    } else if (currentGrid[row][col] !== sudokuSolution[row][col]) {
                        isCorrect = false;
                    }
                }
            }
            
            if (!isComplete) {
                showMessage('Please complete the puzzle first!', 'error');
                return;
            }
            
            if (!isCorrect) {
                showMessage('Not quite right. Keep trying!', 'error');
                return;
            }
            
            // If we get here, it's correct 
           autoCheckSudoku();
        }

        function getHint() {
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 6; col++) {
                    if (!currentGrid[row][col] && !sudokuPuzzle[row][col]) {
                        currentGrid[row][col] = sudokuSolution[row][col];
                        createSudokuGrid();
                        updateSudokuProgress();
                        showMessage(`Hint: ${sudokuSolution[row][col]} placed at row ${row+1}, column ${col+1}`, 'success');
                        setTimeout(autoCheckSudoku, 300);
                        return;
                    }
                }
            }
        }

        function resetSudoku() {
            currentGrid = JSON.parse(JSON.stringify(sudokuPuzzle));
            createSudokuGrid();
            updateSudokuProgress();
            showMessage('Puzzle reset!', 'success');
        }

        // Cipher Functions
        function highlightCipherCell(row, col) {
            document.querySelectorAll('.cipher-cell.highlighted').forEach(cell => {
                cell.classList.remove('highlighted');
            });
            
            const cell = document.querySelector(`.cipher-cell[data-row="${row}"][data-col="${col}"]`);
            cell.classList.add('highlighted');
            
            const coordinate = `(${row + 1},${col + 1})`;
            const letter = cipherData[row][col];
            showMessage(`Coordinate ${coordinate} = ${letter}`, 'success');
        }

        function handleLetterInput(index) {
            const input = document.getElementById(`letter${index}`);
            const value = input.value.toUpperCase();
            
            if (value && value === coordinates[index].answer) {
                input.classList.add('correct');
                input.disabled = true;
                updateCipherAnswer();
                setTimeout(checkCipherCompletion, 300);
            }
        }

        function updateCipherAnswer() {
            let answer = '';
            for (let i = 0; i < 6; i++) {
                const input = document.getElementById(`letter${i}`);
                if (input.classList.contains('correct')) {
                    answer += input.value;
                } else {
                    answer += '_';
                }
            }
            document.getElementById('cipherAnswer').textContent = answer.split('').join(' ');
        }

        function checkCipherCompletion() {
            let allCorrect = true;
            for (let i = 0; i < 6; i++) {
                const input = document.getElementById(`letter${i}`);
                if (!input.classList.contains('correct')) {
                    allCorrect = false;
                    break;
                }
            }
            
            if (allCorrect) {
                cipherAnswer = 'EEATAY';
                showMessage('üéâ Cipher decoded! Proceeding to final answer...', 'success');
                setTimeout(() => {
                    switchToFinal();
                }, 2000);
            }
        }

        // Game Flow Functions
        function switchToGame2() {
            document.getElementById('game1').classList.remove('active');
            document.getElementById('game2').classList.add('active');
            currentGame = 2;
            updateProgress();
        }

        function switchToFinal() {
            document.getElementById('game2').classList.remove('active');
            document.getElementById('finalSection').classList.add('active');
            
            document.getElementById('finalPart1').textContent = sudokuAnswer;
            document.getElementById('finalPart2').textContent = cipherAnswer;
            
            updateProgress();
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            if (currentGame === 1) {
                progressFill.style.width = '0%';
                progressText.textContent = 'Part 1 of 2: Complete the Symbol Sudoku';
            } else if (currentGame === 2) {
                progressFill.style.width = '50%';
                progressText.textContent = 'Part 2 of 2: Decode the Cipher Grid';
            } else {
                progressFill.style.width = '100%';
                progressText.textContent = 'Combine your answers and submit!';
            }
        }

        function checkFinalAnswer() {
            const finalInput = document.getElementById('finalAnswer');
            const value = finalInput.value.toUpperCase();
            const correctAnswer = sudokuAnswer + cipherAnswer;
            
            if (value === correctAnswer) {
                document.getElementById('formsLink').style.display = 'block';
                document.getElementById('submissionAnswer').textContent = value;
                showMessage('üéâ Correct! You can now submit your answer!', 'success');
            }
        }

        function showMessage(text, type) {
            document.querySelectorAll('.success-message, .error-message').forEach(msg => msg.remove());
            
            const message = document.createElement('div');
            message.className = type === 'success' ? 'success-message' : 'error-message';
            message.textContent = text;
            
            const activeSection = document.querySelector('.game-section.active');
            activeSection.appendChild(message);
            
            if (type !== 'success') {
                setTimeout(() => message.remove(), 3000);
            }
        }

        window.addEventListener('load', initGame);
   
 </script>
</body>
</html>
